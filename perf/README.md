## Benchmarking

### Machine

iMac 5K (Late 2014) 4 Ghz i7, 32 GB RAM @ 1600Mhz

### Details

- Each operations listed below has been ran `1_000_000` times. The time showed is for the total time to do the operation that many times.

### Results

#### Crystal 0.12.0

```
$ crystal run --release perf/bench.cr
                                 user     system      total        real
Document#to_bson -------->   5.200000   5.530000   10.730000 (  7.394852)
Binary#to_bson ---------->   0.100000   0.130000   0.230000 (  0.154851)
Code#to_bson ------------>   0.090000   0.130000   0.220000 (  0.148474)
Bool(false)#to_bson ----->   0.090000   0.170000   0.260000 (  0.157431)
Bool(true)#to_bson ------>   0.090000   0.160000   0.250000 (  0.148073)
Float64#to_bson --------->   0.090000   0.160000   0.250000 (  0.143231)
Int32#to_bson ----------->   0.100000   0.170000   0.270000 (  0.153740)
Int64#to_bson ----------->   0.090000   0.170000   0.260000 (  0.146005)
MaxKey#to_bson ---------->   0.090000   0.170000   0.260000 (  0.142921)
MinKey#to_bson ---------->   0.080000   0.180000   0.260000 (  0.142203)
ObjectId#to_bson -------->   0.790000   1.120000   1.910000 (  1.168512)
ObjectId#to_s ----------->   0.050000   0.040000   0.090000 (  0.076679)
Regex#to_bson ----------->   0.100000   0.130000   0.230000 (  0.154047)
String#to_bson ---------->   0.100000   0.170000   0.270000 (  0.163593)
Symbol#to_bson ---------->   0.100000   0.150000   0.250000 (  0.159694)
Time#to_bson ------------>   0.160000   0.150000   0.310000 (  0.227862)
Bool(true)#from_bson ---->   0.000000   0.000000   0.000000 (  0.000820)
Bool(false)#from_bson --->   0.000000   0.000000   0.000000 (  0.000902)
Int32#from_bson --------->   0.010000   0.000000   0.010000 (  0.005605)
Int64#from_bson --------->   0.000000   0.000000   0.000000 (  0.004511)
Float64#from_bson ------->   0.000000   0.000000   0.000000 (  0.004674)
Binary#from_bson -------->   0.040000   0.010000   0.050000 (  0.037990)
Code#from_bson ---------->   0.420000   0.290000   0.710000 (  0.538838)
MaxKey#from_bson -------->   0.000000   0.000000   0.000000 (  0.000239)
MinKey#from_bson -------->   0.000000   0.000000   0.000000 (  0.000239)
ObjectId#from_bson ------>   0.010000   0.020000   0.030000 (  0.024903)
Regex#from_bson --------->   0.500000   0.320000   0.820000 (  0.620118)
String#from_bson -------->   0.310000   0.240000   0.550000 (  0.424513)
Symbol#from_bson -------->   0.330000   0.260000   0.590000 (  0.422463)
Time#from_bson ---------->   0.000000   0.000000   0.000000 (  0.006262)
Document#from_bson ------>   4.730000   4.870000   9.600000 (  6.617938)
```

### Ruby 2.2.4

```
       user     system      total        real
Document#to_bson ------>  7.140000   0.030000   7.170000 (  7.177988)
Binary#to_bson -------->  1.190000   0.140000   1.330000 (  1.332653)
Code#to_bson ---------->  0.840000   0.090000   0.930000 (  0.937424)
FalseClass#to_bson ---->  0.620000   0.260000   0.880000 (  0.893564)
Float#to_bson --------->  0.640000   0.270000   0.910000 (  0.902573)
Integer#to_bson ------->  0.650000   0.260000   0.910000 (  0.916232)
MaxKey#to_bson -------->  0.620000   0.060000   0.680000 (  0.686380)
MinKey#to_bson -------->  0.610000   0.050000   0.660000 (  0.667446)
ObjectId#to_bson ------>  1.010000   0.070000   1.080000 (  1.071387)
ObjectId#to_s --------->  0.590000   0.000000   0.590000 (  0.602449)
Regexp#to_bson -------->  1.070000   0.060000   1.130000 (  1.141685)
String#to_bson -------->  0.640000   0.050000   0.690000 (  0.684404)
Symbol#to_bson -------->  0.630000   0.040000   0.670000 (  0.671307)
Time#to_bson ---------->  1.250000   0.030000   1.280000 (  1.292365)
TrueClass#to_bson ----->  0.610000   0.240000   0.850000 (  0.850321)
Boolean#from_bson ----->  0.590000   0.060000   0.650000 (  0.649665)
Int32#from_bson ------->  0.580000   0.170000   0.750000 (  0.760164)
Int64#from_bson ------->  0.600000   0.200000   0.800000 (  0.794256)
Float#from_bson ------->  0.580000   0.150000   0.730000 (  0.740671)
Binary#from_bson ------>  0.980000   0.070000   1.050000 (  1.055347)
Code#from_bson -------->  0.760000   0.070000   0.830000 (  0.829738)
Boolean#from_bson ----->  0.600000   0.060000   0.660000 (  0.658007)
MaxKey#from_bson ------>  0.600000   0.060000   0.660000 (  0.664508)
MinKey#from_bson ------>  0.600000   0.060000   0.660000 (  0.676646)
ObjectId#from_bson ---->  0.710000   0.040000   0.750000 (  0.748298)
Regexp#from_bson ------>  0.860000   0.060000   0.920000 (  0.939016)
String#from_bson ------>  0.620000   0.080000   0.700000 (  0.705617)
Symbol#from_bson ------>  0.670000   0.050000   0.720000 (  0.719622)
Time#from_bson -------->  2.170000   0.060000   2.230000 (  2.225911)
Document#from_bson ----> 11.980000   0.010000  11.990000 ( 12.013237)
```